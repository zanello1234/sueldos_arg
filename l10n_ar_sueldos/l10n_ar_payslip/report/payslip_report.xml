<odoo>
    <data>
        <!-- Definición del reporte -->
        <record id="action_report_payslip_ar" model="ir.actions.report">
            <field name="name">Recibo de Sueldo AR</field>
            <field name="model">hr.payslip</field>
            <field name="report_type">qweb-pdf</field>
            <field name="report_name">l10n_ar_payslip.report_payslip_ar</field>
            <field name="report_file">l10n_ar_payslip.report_payslip_ar</field>
            <field name="print_report_name">'Recibo de Sueldo AR - %s' % (object.employee_id.name)</field>
            <field name="binding_model_id" ref="hr_payroll.model_hr_payslip" />
            <field name="binding_type">report</field>
            <field name="paperformat_id" ref="paperformat_payslip_ar" />
        </record>

        <!-- Plantilla del reporte -->
        <template id="report_payslip_ar">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <div class="row" style="transform: scale(0.32); font-size: 7.2px;">
                        <!-- Copy 1: Original -->
                        <div class="col-6">
                            <div class="article">
                                <!-- Encabezado -->
                                <div class="row border border-dark p-1.8">
                                    <div class="col-4">
                                        <img t-if="o.company_id.logo"
                                            t-att-src="image_data_uri(o.company_id.logo)"
                                            style="max-height: 48px;" alt="Logo" />
                                    </div>
                                    <div class="col-4 text-center">
                                        <h3>
                                            <span t-field="o.company_id.name" />
                                        </h3>
                                        <p>
                                            <t t-esc="o.company_id.street" /> - <t
                                                t-esc="o.company_id.city" /><br /> CUIT: <span
                                                t-field="o.company_id.vat" />
                                        </p>
                                        <div class="row">
                                            <p>Fecha ingreso: <span
                                                    t-field="o.employee_id.fecha_ingreso" /></p>
                                            <t t-if="o.employee_id.fecha_egreso">
                                                <p>Fecha egreso: <span
                                                        t-field="o.employee_id.fecha_egreso" /></p>
                                            </t>
                                        </div>
                                    </div>
                                    <div class="col-4 text-right">
                                        <h2>ORIGINAL</h2>
                                        <p>Recibo Nº: <span t-field="o.number" /></p>
                                        <p>Fecha: <span t-field="o.date_to" /></p>


                                    </div>
                                </div>

                                <!-- Datos del Empleado -->
                                <div class="row border border-dark mt-1.5 p-1.5">
                                    <div class="col-8">
                                        <table class="table table-sm table-bordered">
                                            <tr>
                                                <td>
                                                    <strong>Apellido y Nombre:</strong>
                                                </td>
                                                <td>
                                                    <span t-field="o.employee_id.name" />
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <strong>Legajo:</strong>
                                                </td>
                                                <td>
                                                    <span t-field="o.employee_id.legajo" />
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <strong>CUIL:</strong>
                                                </td>
                                                <td>
                                                    <span t-field="o.employee_id.ssnid" />
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <strong>Fecha Ingreso:</strong>
                                                </td>
                                                <td>
                                                    <span t-field="o.contract_id.date_start" />
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <strong>Puesto:</strong>
                                                </td>
                                                <td>
                                                    <span t-field="o.contract_id.job_id.name" />
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <strong>O. Social:</strong>
                                                </td>
                                                <td>
                                                    <span t-field="o.employee_id.obra_social.code" />
                                                    <br />
                                                    <span t-field="o.employee_id.obra_social" />
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                    <div class="col-4">
                                        <table class="table table-sm table-bordered">
                                            <tr>
                                                <td>
                                                    <strong>Período:</strong>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Desde: <span t-field="o.date_from" /></td>
                                            </tr>
                                            <tr>
                                                <td>Hasta: <span t-field="o.date_to" /></td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <strong>Fecha de Pago:</strong>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <span t-field="o.payment_date" />
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>

                                <!-- Conceptos -->
                                <div class="row mt-1.5">
                                    <div class="col-12">
                                        <table class="table table-sm table-bordered">
                                            <thead>
                                                <tr>
                                                    <th>Secuencia</th>
                                                    <th>Concepto</th>
                                                    <th class="text-right">Cantidad</th>
                                                    <th class="text-right">Remunerativos</th>
                                                    <th class="text-right">No Remunerativos</th>
                                                    <th class="text-right">Descuentos</th>
                                                    <th class="text-right">Netos</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr
                                                    t-foreach="o.line_ids.filtered(lambda l: l.appears_on_payslip)"
                                                    t-as="line">
                                                    <td>
                                                        <span t-field="line.sequence" />
                                                    </td>
                                                    <td>
                                                        <span t-field="line.name" />
                                                    </td>
                                                    <td class="text-right">
                                                        <span t-field="line.quantity" />
                                                    </td>
                                                    <td class="text-right">
                                                        <span
                                                            t-if="line.category_id.code in ['BASIC']"
                                                            t-esc="line.total"
                                                            t-options="{'widget': 'monetary', 'display_currency': o.company_id.currency_id}" />
                                                    </td>
                                                    <td class="text-right">
                                                        <span
                                                            t-if="line.category_id.code in ['ALW']"
                                                            t-esc="line.total"
                                                            t-options="{'widget': 'monetary', 'display_currency': o.company_id.currency_id}" />
                                                    </td>
                                                    <td class="text-right">
                                                        <span t-if="line.category_id.code == 'DED'"
                                                            t-esc="line.total"
                                                            t-options="{'widget': 'monetary', 'display_currency': o.company_id.currency_id}" />
                                                    </td>
                                                    <td class="text-right">
                                                        <span t-esc="line.total"
                                                            t-options="{'widget': 'monetary', 'display_currency': o.company_id.currency_id}" />
                                                    </td>
                                                </tr>
                                            </tbody>
                                            <tfoot>
                                                <tr>
                                                    <td colspan="3" class="text-right">
                                                        <strong>Totales</strong>
                                                    </td>
                                                    <!-- Salario Básico -->
                                                    <td class="text-right">
                                                        <strong
                                                            t-esc="sum(o.line_ids.filtered(lambda l: l.category_id.code == 'BASIC').mapped('total'))"
                                                            t-options="{'widget': 'monetary', 'display_currency': o.company_id.currency_id}" />
                                                    </td>
                                                    <!-- Remunerativos -->
                                                    <td class="text-right">
                                                        <strong
                                                            t-esc="sum(o.line_ids.filtered(lambda l: l.category_id.code == 'ALW').mapped('total'))"
                                                            t-options="{'widget': 'monetary', 'display_currency': o.company_id.currency_id}" />
                                                    </td>
                                                    <!-- Descuentos -->
                                                    <td class="text-right">
                                                        <strong
                                                            t-esc="sum(o.line_ids.filtered(lambda l: l.category_id.code == 'DED').mapped('total'))"
                                                            t-options="{'widget': 'monetary', 'display_currency': o.company_id.currency_id}" />
                                                    </td>
                                                    <!-- Total general (Remunerativos + No
                                                    remunerativos - Descuentos) -->
                                                    <td class="text-right">
                                                        <strong
                                                            t-esc="(
                                                            sum(o.line_ids.filtered(lambda l: l.category_id.code in ['BASIC', 'ALW']).mapped('total')) 
                                                            + sum(o.line_ids.filtered(lambda l: l.category_id.code == 'DED').mapped('total'))
                                                            )"
                                                            t-options="{'widget': 'monetary', 'display_currency': o.company_id.currency_id}" />
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="text-right">
                                                        <strong>Neto: </strong>
                                                        <strong
                                                            t-esc="(
                                                            sum(o.line_ids.filtered(lambda l: l.category_id.code in ['BASIC', 'ALW']).mapped('total')) 
                                                            + sum(o.line_ids.filtered(lambda l: l.category_id.code == 'DED').mapped('total'))
                                                        )"
                                                            t-options="{'widget': 'monetary', 'display_currency': o.company_id.currency_id}" />
                                                    </td>
                                                    <td colspan="5" class="text-center">
                                                        <strong>
                                                            <span t-field="o.net_salary_in_words" />
                                                        </strong>
                                                    </td>
                                                </tr>
                                            </tfoot>


                                        </table>
                                    </div>
                                </div>

                                <!-- Forma de Pago y Datos de Leyes Sociales -->
                                <div class="row mt-1.5">
                                    <div class="col-12">
                                        <div class="border border-dark p-1.5">
                                            <strong>Forma de Pago: </strong>
                                            <span t-field="o.payment_type" />
                                            <t t-if="o.payment_type == 'transfer'">
                                                <br />
                                                <br />
                                                <strong>Cuenta: </strong>
                                                <span t-field="o.bank_account_id.acc_number" />
                                            </t>
                                            <br />
                                            <strong>Pago de leyes sociales</strong>
                                            <p>
                                                <strong>Fecha de Depósito:</strong>
                                                <span
                                                    t-field="o.payslip_run_id.social_security_deposit_date" />
                                            </p>
                                            <p>
                                                <strong>Periodo:</strong>
                                                <span t-field="o.date_from"
                                                    t-options="{'format': 'MMMM YYYY'}" />
                                            </p>
                                            <p>
                                                <strong>Banco:</strong>
                                                <span
                                                    t-field="o.payslip_run_id.deposit_bank_id.name" />
                                            </p>
                                            <p>Recibo Leyes 17250, 20744 y 21297</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Firmas -->
                                <div class="row mt-3">
                                    <div class="col-6 text-center">
                                        <div style="border-top: 0.6px solid black;">
                                            Firma del Empleador
                                        </div>
                                    </div>
                                    <div class="col-6 text-center">
                                        <div style="border-top: 0.6px solid black;">
                                            Firma del Empleado
                                        </div>
                                    </div>
                                </div>

                                <!-- Lugar y Fecha -->
                                <div class="row mt-1.5">
                                    <div class="col-12 text-center">
                                        <p>Lugar y Fecha: ........................................</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Copy 2: Duplicado -->
                        <div class="col-6">
                            <div class="article">
                                <!-- Encabezado -->
                                <div class="row border border-dark p-1.8">
                                    <div class="col-4">
                                        <img t-if="o.company_id.logo"
                                            t-att-src="image_data_uri(o.company_id.logo)"
                                            style="max-height: 48px;" alt="Logo" />
                                    </div>
                                    <div class="col-4 text-center">
                                        <h3>
                                            <span t-field="o.company_id.name" />
                                        </h3>
                                        <p>
                                            <t t-esc="o.company_id.street" /> - <t
                                                t-esc="o.company_id.city" /><br /> CUIT: <span
                                                t-field="o.company_id.vat" />
                                        </p>
                                        <div class="row">
                                            <p>Fecha ingreso: <span
                                                    t-field="o.employee_id.fecha_ingreso" /></p>
                                            <t t-if="o.employee_id.fecha_egreso">
                                                <p>Fecha egreso: <span
                                                        t-field="o.employee_id.fecha_egreso" /></p>
                                            </t>

                                        </div>
                                    </div>
                                    <div class="col-4 text-right">
                                        <h2>DUPLICADO</h2>
                                        <p>Recibo Nº: <span t-field="o.number" /></p>
                                        <p>Fecha: <span t-field="o.date_to" /></p>

                                    </div>
                                </div>

                                <!-- Datos del Empleado -->
                                <div class="row border border-dark mt-1.5 p-1.5">
                                    <div class="col-8">
                                        <table class="table table-sm table-bordered">
                                            <tr>
                                                <td>
                                                    <strong>Apellido y Nombre:</strong>
                                                </td>
                                                <td>
                                                    <span t-field="o.employee_id.name" />
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <strong>Legajo:</strong>
                                                </td>
                                                <td>
                                                    <span t-field="o.employee_id.legajo" />
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <strong>CUIL:</strong>
                                                </td>
                                                <td>
                                                    <span t-field="o.employee_id.ssnid" />
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <strong>Fecha Ingreso:</strong>
                                                </td>
                                                <td>
                                                    <span t-field="o.contract_id.date_start" />
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <strong>Puesto:</strong>
                                                </td>
                                                <td>
                                                    <span t-field="o.contract_id.job_id.name" />
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <strong>O. Social:</strong>
                                                </td>
                                                <td>
                                                    <span t-field="o.employee_id.obra_social.code" />
                                                    <br />
                                                    <span t-field="o.employee_id.obra_social" />
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                    <div class="col-4">
                                        <table class="table table-sm table-bordered">
                                            <tr>
                                                <td>
                                                    <strong>Período:</strong>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Desde: <span t-field="o.date_from" /></td>
                                            </tr>
                                            <tr>
                                                <td>Hasta: <span t-field="o.date_to" /></td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <strong>Fecha de Pago:</strong>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <span t-field="o.payment_date" />
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>

                                <!-- Conceptos -->
                                <div class="row mt-1.5">
                                    <div class="col-12">
                                        <table class="table table-sm table-bordered">
                                            <thead>
                                                <tr>
                                                    <th>Secuencia</th>
                                                    <th>Concepto</th>
                                                    <th class="text-right">Cantidad</th>
                                                    <th class="text-right">Remunerativos</th>
                                                    <th class="text-right">No Remunerativos</th>
                                                    <th class="text-right">Descuentos</th>
                                                    <th class="text-right">Netos</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr
                                                    t-foreach="o.line_ids.filtered(lambda l: l.appears_on_payslip)"
                                                    t-as="line">
                                                    <td>
                                                        <span t-field="line.sequence" />
                                                    </td>
                                                    <td>
                                                        <span t-field="line.name" />
                                                    </td>
                                                    <td class="text-right">
                                                        <span t-field="line.quantity" />
                                                    </td>
                                                    <td class="text-right">
                                                        <span
                                                            t-if="line.category_id.code in ['BASIC']"
                                                            t-esc="line.total"
                                                            t-options="{'widget': 'monetary', 'display_currency': o.company_id.currency_id}" />
                                                    </td>
                                                    <td class="text-right">
                                                        <span
                                                            t-if="line.category_id.code in ['ALW']"
                                                            t-esc="line.total"
                                                            t-options="{'widget': 'monetary', 'display_currency': o.company_id.currency_id}" />
                                                    </td>
                                                    <td class="text-right">
                                                        <span t-if="line.category_id.code == 'DED'"
                                                            t-esc="line.total"
                                                            t-options="{'widget': 'monetary', 'display_currency': o.company_id.currency_id}" />
                                                    </td>
                                                    <td class="text-right">
                                                        <span t-esc="line.total"
                                                            t-options="{'widget': 'monetary', 'display_currency': o.company_id.currency_id}" />
                                                    </td>
                                                </tr>
                                            </tbody>
                                            <tfoot>
                                                <tr>
                                                    <td colspan="3" class="text-right">
                                                        <strong>Totales</strong>
                                                    </td>
                                                    <!-- Salario Básico -->
                                                    <td class="text-right">
                                                        <strong
                                                            t-esc="sum(o.line_ids.filtered(lambda l: l.category_id.code == 'BASIC').mapped('total'))"
                                                            t-options="{'widget': 'monetary', 'display_currency': o.company_id.currency_id}" />
                                                    </td>
                                                    <!-- Remunerativos -->
                                                    <td class="text-right">
                                                        <strong
                                                            t-esc="sum(o.line_ids.filtered(lambda l: l.category_id.code == 'ALW').mapped('total'))"
                                                            t-options="{'widget': 'monetary', 'display_currency': o.company_id.currency_id}" />
                                                    </td>
                                                    <!-- Descuentos -->
                                                    <td class="text-right">
                                                        <strong
                                                            t-esc="sum(o.line_ids.filtered(lambda l: l.category_id.code == 'DED').mapped('total'))"
                                                            t-options="{'widget': 'monetary', 'display_currency': o.company_id.currency_id}" />
                                                    </td>
                                                    <!-- Total general (Remunerativos + No
                                                    remunerativos - Descuentos) -->
                                                    <td class="text-right">
                                                        <strong
                                                            t-esc="(
                                                            sum(o.line_ids.filtered(lambda l: l.category_id.code in ['BASIC', 'ALW']).mapped('total')) 
                                                            + sum(o.line_ids.filtered(lambda l: l.category_id.code == 'DED').mapped('total'))
                                                            )"
                                                            t-options="{'widget': 'monetary', 'display_currency': o.company_id.currency_id}" />
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="text-right">
                                                        <strong>Neto: </strong>
                                                        <strong
                                                            t-esc="(
                                                            sum(o.line_ids.filtered(lambda l: l.category_id.code in ['BASIC', 'ALW']).mapped('total')) 
                                                            + sum(o.line_ids.filtered(lambda l: l.category_id.code == 'DED').mapped('total'))
                                                        )"
                                                            t-options="{'widget': 'monetary', 'display_currency': o.company_id.currency_id}" />
                                                    </td>
                                                    <td colspan="5" class="text-center">
                                                        <strong>
                                                            <span t-field="o.net_salary_in_words" />
                                                        </strong>
                                                    </td>
                                                </tr>
                                            </tfoot>


                                        </table>
                                    </div>
                                </div>

                                <!-- Forma de Pago y Datos de Leyes Sociales -->
                                <div class="row mt-1.5">
                                    <div class="col-12">
                                        <div class="border border-dark p-1.5">
                                            <strong>Forma de Pago: </strong>
                                            <span t-field="o.payment_type" />
                                            <t t-if="o.payment_type == 'transfer'">
                                                <br />
                                                <strong>Cuenta: </strong>
                                                <span t-field="o.bank_account_id.acc_number" />
                                            </t>
                                            <br />
                                            <strong>Pago de leyes sociales</strong>
                                            <p>
                                                <strong>Fecha de Depósito:</strong>
                                                <span
                                                    t-field="o.payslip_run_id.social_security_deposit_date" />
                                            </p>
                                            <p>
                                                <strong>Periodo:</strong>
                                                <span t-field="o.date_from"
                                                    t-options="{'format': 'MMMM YYYY'}" />
                                            </p>
                                            <p>
                                                <strong>Banco:</strong>
                                                <span
                                                    t-field="o.payslip_run_id.deposit_bank_id.name" />
                                            </p>
                                            <p>Recibo Leyes 17250, 20744 y 21297</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Firmas -->
                                <div class="row mt-3">
                                    <div class="col-6 text-center">
                                        <div style="border-top: 0.6px solid black;">
                                            Firma del Empleador
                                        </div>
                                    </div>
                                    <div class="col-6 text-center">
                                        <div style="border-top: 0.6px solid black;">
                                            Firma del Empleado
                                        </div>
                                    </div>
                                </div>

                                <!-- Lugar y Fecha -->
                                <div class="row mt-1.5">
                                    <div class="col-12 text-center">
                                        <p>Lugar y Fecha: ........................................</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </t>
            </t>
        </template>
    </data>
</odoo>